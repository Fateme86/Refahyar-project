# Refahyar-project

عنوان پروژه:
رفاه یار
اعضای تیم:
فاطمه شریفی، عارفه سلمانی



خلاصه پروژه
سامانه رفاه‌یار یک پلتفرم وب‌و‌موبایل است برای تخصیص، رزرو و مدیریت امکانات رفاهی (استخر، سینما، ماساژ، و ورزش تخصصی) برای کارکنان یک شرکت و اعضای خانواده‌شان. هر کارمند و هر عضو خانواده اکانت مستقل دارد، سهمیه ماهانه تعریف می‌شود (استخر 4 بار، سینما 4 بار، ماساژ 1 بار)، کاربران رزرو می‌کنند، حضور را با «لمس/اسکن/تأیید مدیر» ثبت می‌کنند و سیستم سهمیه را کم می‌کند و گزارش می‌دهد
.
هدف پروژه
طراحی و پیاده‌سازی سامانه‌ای یکپارچه برای مدیریت، تخصیص و رزرو امکانات رفاهی کارکنان و خانواده آن‌ها شامل استخر، سینما، ماساژ و ورزش‌های تخصصی، با قابلیت رزرو آنلاین، تأیید حضور و کنترل سهمیه ماهانه هر فرد
.
کاربران هدف و نقش‌ها

1.	کارمند (Employee): حساب اصلی، امکان مشاهده سهمیه و رزرو برای خود
2.	
3.	اعضای خانواده (Family Members): همسر و فرزندان با اکانت جداگانه
4.	
5.	مدیر شرکت (HR Admin): مدیریت کاربران، سهمیه‌ها و گزارش‌ها
6.	
7.	مدیر مجموعه (Facility Manager): تأیید رزروها و حضور کاربران، تعیین ظرفیت و سانس
8.	
9.	مدیر سامانه (Super Admin): مدیریت کل زیرساخت و شرکت‌ها
10.	
امکانات کلیدی سامانه

1. رزرو خدمات رفاهی
•	یک منوی کشویی (Dropdown Menu) در صفحه اصلی برای انتخاب نوع خدمت رفاهی:
o	استخر
o	سینما
o	ماساژ
o	ورزش تخصصی (مثل والیبال، بدنسازی، تنیس و غیره)
•	پس از انتخاب نوع خدمت، کاربر شهر مورد نظر خود را انتخاب می‌کند (از بین شهرهای مجاز شرکت).
•	سپس سامانه فهرست مراکز/باشگاه‌های مرتبط با آن شهر را نمایش می‌دهد:
o	برای استخر : فهرست استخرهای طرف قرارداد
o	برای سینما : فهرست سینماها و سانس‌های قابل رزرو
o	برای ماساژ : فهرست مراکز و زمان‌های خالی
o	برای ورزش تخصصی : فهرست باشگاه‌ها، مربیان و برنامه‌ها
•	هر باشگاه/مرکز دارای ظرفیت، موقعیت مکانی (نقشه یا آدرس)، و زمان‌بندی سانس‌ها است.
•	کاربر پس از انتخاب سانس و مرکز، رزرو خود را تأیید می‌کند.
•	سیستم به‌صورت خودکار بررسی می‌کند:
o	سهمیه ماهانه کاربر یا عضو خانواده کافی است یا خیر
o	ظرفیت مرکز در زمان انتخاب‌شده پر نشده باشد
o	رزرو تداخلی با رزروهای دیگر نداشته باشد
2.مدیریت سهمیه‌ها
•	هر کاربر (کارمند یا عضو خانواده) دارای سهمیه ماهانه است:
o	استخر: ۴ بار در ماه
o	سینما: ۴ بار در ماه
o	ماساژ: ۱ بار در ماه
o	ورزش تخصصی: بسته به سیاست شرکت (مثلاً ثابت یا ثبت‌نام دوره‌ای)
•	سهمیه‌ها توسط شرکت قابل تغییر هستند.
•	ظرفیت و سانس‌های قابل رزرو توسط مدیر مجموعه تعیین و بهد سیستم اضافه می‌شوند.
•	سامانه میزان مصرف‌شده و باقی‌مانده سهمیه را در داشبورد نشان می‌دهد.
3. تأیید حضور
•	تأیید حضور در محل با یکی از روش‌های زیر:
o	ثبت اثر انگشت یا لمس QR Code توسط کاربر در محل
o	تأیید توسط مدیر مجموعه در پنل مدیریتی
•	حضور تأیید‌شده موجب کسر از سهمیه می‌شود.

4. فهرست مراکز و اطلاعات شهری
•	سامانه دارای دیتابیس مراکز رفاهی است که شامل:
o	نام مرکز / باشگاه / سینما
o	نوع خدمت (pool, cinema, massage, sport)
o	آدرس و شهر
o	ظرفیت و سانس‌های فعال
o	مدیر مرکز و اطلاعات تماس
•	کاربر می‌تواند مراکز را در فهرست جستجو یا فیلتر کند (بر اساس شهر، نوع خدمت، ظرفیت و زمان در دسترس).
5. داشبورد کاربری
•	نمایش سهمیه باقیمانده، رزروهای فعال، تاریخچه حضور
•	امکان لغو رزرو تا مهلت مجاز (مثلاً ۶ ساعت قبل)
•	نمایش نوتیفیکیشن‌های سیستمی (تأیید رزرو، لغو، یادآوری)
6. بخش مدیریتی (Admin Panel)
•	تعریف شرکت‌ها و کارکنان
•	تخصیص یا تغییر سهمیه‌ها
•	تعریف و ویرایش مراکز، سانس‌ها و ظرفیت‌ها
•	مشاهده گزارش مصرف رفاهی به تفکیک فرد، شهر، یا نوع خدمت
•	خروجی گزارش‌ها به فرمت Excel / PDF




فناوری‌های مورد استفاده (Technology Stack)
در پیاده‌سازی سامانه رفاه‌یار از فناوری‌های زیر استفاده شده است:
•	Backend: Python
•	Frontend: HTML, CSS, JavaScript
•	Database: MySQL
ابزارها و زیرساخت
•	Docker : کانتینرسازی هر سرویس
•	Docker Compose: مدیریت اجرای سرویس‌ها
•	Git : کنترل نسخه
•	VS Code : محیط توسعه
•	Postman: تست API
سایر فناوری‌ها
•	JWT : برای احراز هویت
•	QR Code : برای تأیید حضور
•	API Gateway: برای مدیریت درخواست‌ها

معماری سیستم (Microservices Architecture)
سامانه رفاه‌یار بر اساس معماری میکروسرویس طراحی شده است. در این معماری، سیستم به چند سرویس مستقل تقسیم می‌شود که هر کدام مسئول یک بخش مشخص از سیستم هستند.
 میکروسرویس‌های اصلی
۱. سرویس احراز هویت و کاربران (User Service)
•	ثبت‌نام و ورود کاربران
•	مدیریت نقش‌ها:
•	کارمند
•	اعضای خانواده
•	مدیر
•	صدور و اعتبارسنجی JWT
۲. سرویس مراکز رفاهی (Facility Service)
•	مدیریت اطلاعات مراکز رفاهی
•	تعریف سانس‌ها
•	تعیین ظرفیت هر مرکز
۳. سرویس رزرو (Reservation Service)
•	ثبت رزرو
•	جلوگیری از تداخل زمانی
•	بررسی ظرفیت
•	لغو رزرو
۴. سرویس سهمیه (Quota Service)
•	مدیریت سهمیه ماهانه کاربران
•	کنترل تعداد استفاده مجاز
•	کسر سهمیه پس از رزرو موفق
۵. سرویس تأیید حضور (Attendance Service)
•	تولید QR Code
•	اسکن و ثبت حضور کاربران
•	جلوگیری از سوءاستفاده
۶. سرویس گزارش‌گیری (Report Service)
•	گزارش میزان استفاده
•	گزارش سهمیه‌ها
•	خروجی PDF و Excel
راهنمای اجرای پروژه (Microservices)
پیش‌نیازها
1.	نصب Python 3.9+
2.	نصب MySQL
3.	نصب Docker و Docker Compose
4.	نصب VS Code

مراحل اجرا
۱. دریافت پروژه
git clone <project-repository-url> cd refahyar 
۲. اجرای سرویس‌ها با Docker Compose
docker-compose up --build 
۳. سرویس‌های در حال اجرا
•	API Gateway → http://localhost:8000
•	User Service → http://localhost:8001
•	Reservation Service → http://localhost:8002
•	Facility Service → http://localhost:8003
•	Report Service → http://localhost:8004
۴. تست APIها
•	استفاده از Postman
•	یا مستندات خودکار FastAPI:
/docs

۵. دسترسی کاربران
•	رابط وب از طریق API Gateway
•	تمام درخواست‌ها ابتدا به Gateway ارسال می‌شوند

مشکلات و چالش‌هایی که سامانه‌ی «رفاه‌یار» حل می‌کند
1.مدیریت سنتی و پراکنده‌ی خدمات رفاهی
مشکل:
در بسیاری از شرکت‌ها، رزرو و تخصیص امکانات رفاهی (مثل استخر، سینما، ماساژ یا ورزش) به‌صورت دستی، تلفنی یا با فرم‌های کاغذی انجام می‌شود. این روش باعث:
•	اتلاف زمان زیاد برای HR و کارکنان
•	خطا در ثبت سهمیه‌ها
•	ازدحام یا ناهماهنگی در زمان‌بندی مراکز می‌شود
راه‌حل سامانه:
اتوماسیون کامل فرآیند رزرو از طریق وب و اپلیکیشن موبایل با قابلیت کنترل سهمیه، زمان‌بندی و ظرفیت هر مرکز به‌صورت لحظه‌ای.
2. نداشتن دید و کنترل دقیق بر سهمیه‌های رفاهی
مشکل:
شرکت‌ها معمولاً نمی‌دانند هر کارمند یا خانواده‌اش چه میزان از امکانات استفاده کرده‌اند. گاهی برخی کارکنان بیش‌ازحد استفاده می‌کنند و بعضی دیگر سهمیه‌شان را از دست می‌دهند.
راه‌حل سامانه:
سیستم سهمیه‌بندی ماهانه برای هر فرد (کارمند و خانواده‌اش) که به‌صورت خودکار در زمان رزرو و تأیید حضور کنترل می‌شود. گزارش کامل مصرف برای HR و مدیریت قابل مشاهده و خروجی‌گیری است.
3.نبود گزارش‌های تحلیلی و داده‌محور برای تصمیم‌گیری
مشکل:
مدیران شرکت و HR داده‌ی دقیقی درباره‌ی استفاده از خدمات رفاهی ندارند؛ مثلاً کدام شهر یا مرکز بیشترین استفاده را دارد یا چه زمانی ازدحام رخ می‌دهد.
راه‌حل سامانه:
گزارش‌های آماری و نموداری از:
•	میزان استفاده از هر خدمت
•	درصد حضور واقعی نسبت به رزروها
•	پرکاربردترین مراکز و سانس‌ها
•	وضعیت سهمیه‌های استفاده‌نشده
که به مدیران در بهینه‌سازی قراردادها و بودجه رفاهی کمک می‌کند.
4.احتمال سوء‌استفاده از خدمات رفاهی
مشکل:
در نبود سیستم کنترل سهمیه و تأیید حضور، برخی کاربران می‌توانند چندین‌بار رزرو انجام دهند یا حضور غیرواقعی ثبت کنند.
راه‌حل سامانه:
•	کنترل سهمیه ماهانه در هر رزرو
•	محدودیت ظرفیت برای هر سانس
•	تأیید حضور فقط با QR یا مدیر مرکز
•	ثبت لاگ فعالیت و گزارش امنیتی
5. نبود ارتباط آنلاین بین شرکت و مراکز طرف قرارداد
مشکل:
HR باید به‌صورت دستی رزروها را برای مراکز ارسال کند و تأییدیه‌ها را جمع‌آوری کند که زمان‌بر و مستعد خطاست.
راه‌حل سامانه:
اتصال آنلاین بین پنل شرکت و پنل مراکز رفاهی.
رزروها به‌صورت آنی در سیستم مرکز نمایش داده می‌شوند و وضعیت تأیید حضور به HR برمی‌گردد.






